# Инструкции по развертыванию Telegram-бота на PythonAnywhere

Этот документ содержит пошаговые инструкции по развертыванию вашего Telegram-бота на платформе PythonAnywhere.

## 1. Подготовка файлов

Убедитесь, что у вас есть следующие файлы в корневой директории вашего проекта:
- `bot.py` (основной файл бота)
- `config.py` (файл с конфигурацией)
- `credentials.json` (файл с учетными данными для Google Sheets API)
- `requirements.txt` (файл со списком зависимостей)
- `bot_runner.py` (файл для запуска бота как постоянной задачи)
- Любые медиафайлы, используемые ботом (например, `welcome.png`, `welcome.jpg`, `welcome.mp4`, `reminder_image.jpg`)

## 2. Загрузка файлов на PythonAnywhere

1. Войдите в свою учетную запись на [PythonAnywhere](https://www.pythonanywhere.com/).
2. Перейдите на вкладку **Files**.
3. Создайте новую директорию для вашего проекта (например, `my_telegram_bot`).
4. Загрузите все перечисленные выше файлы в эту новую директорию.

## 3. Настройка виртуального окружения и установка зависимостей

1. Перейдите на вкладку **Consoles** и откройте новую **Bash console**.
2. Перейдите в директорию вашего проекта:
   ```bash
   cd my_telegram_bot
   ```
3. Создайте виртуальное окружение (рекомендуется использовать Python 3.10, так как бот написан на этой версии):
   ```bash
   mkvirtualenv --python=/usr/bin/python3.10 my_bot_env
   ```
   (Замените `my_bot_env` на желаемое имя вашего виртуального окружения).
4. Активируйте виртуальное окружение:
   ```bash
   workon my_bot_env
   ```
5. Установите все зависимости из `requirements.txt`:
   ```bash
   pip install -r requirements.txt
   ```

## 4. Настройка файла `bot_runner.py`

Файл `bot_runner.py` уже создан и настроен для запуска вашего бота. Он добавляет директорию проекта в `sys.path` и вызывает функцию `main()` из `bot.py`.

## 5. Запуск бота как постоянной задачи

1. Перейдите на вкладку **Web**.
2. Прокрутите вниз до раздела **Always-on tasks**.
3. Нажмите **Add a new always-on task**.
4. В поле **Command** введите следующую команду, заменив `my_bot_env` на имя вашего виртуального окружения и `my_telegram_bot` на имя директории вашего проекта:
   ```bash
   /home/your_username/.virtualenvs/my_bot_env/bin/python /home/your_username/my_telegram_bot/bot_runner.py
   ```
   (Замените `your_username` на ваше имя пользователя на PythonAnywhere).
5. Нажмите **Create**.

## 6. Проверка работы бота

После запуска постоянной задачи ваш бот должен быть активен. Проверьте его работу, отправив ему сообщение в Telegram.

## 7. Устранение неполадок

- **Логи:** Если бот не работает, проверьте логи на вкладке **Consoles** (в разделе **Always-on tasks** будет ссылка на логи вашей задачи).
- **Ошибки зависимостей:** Убедитесь, что все зависимости установлены корректно в вашем виртуальном окружении.
- **Пути:** Проверьте, что все пути к файлам в `bot_runner.py` и в команде запуска постоянной задачи указаны верно.
- **API ключи:** Убедитесь, что `BOT_TOKEN` и `ADMIN_ID` в `config.py` указаны правильно.
- **Google Sheets API:** Проверьте, что `credentials.json` корректен и имеет необходимые разрешения для доступа к вашей таблице Google Sheets.